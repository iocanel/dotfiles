name: backstage-playground

startup_window: editor
startup_pane: 1
windows:
  - console:
      layout: main-vertical
      root: ~/workspace/src/github.com/q-shift/backstage-playground
      panes:
        - console:
          - nvm use node
  - frontend:
      layout: main-vertical
      root: ~/workspace/src/github.com/q-shift/backstage-playground
      panes:
        - console:
          - nvm use node
          - yarn install
          - yarn start --config ../../app-config.qshift.local.yaml
  - backend:
      layout: main-vertical
      root: ~/workspace/src/github.com/q-shift/backstage-playground
      panes:
        - console:
          - nvm use node
          - yarn install
          - yarn start-backend --config ../../app-config.qshift.local.yaml

  - backstage:
      layout: main-vertical
      root: ~/workspace/src/github.com/q-shift/backstage-playground
      panes:
        - vim:
          - nvm use node
          - vi
  - templates:
      layout: main-vertical
      root: ~/workspace/src/github.com/q-shift/software-templates
      panes:
        - vim:
          - vi
on_project_start:
  - tmux bind -r r send-keys -t backstage-playground:console.0 C-c C-m "yarn dev" C-m
